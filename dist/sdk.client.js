var Ze=Object.create,_e=Object.defineProperty,et=Object.getPrototypeOf,tt=Object.prototype.hasOwnProperty,nt=Object.getOwnPropertyNames,rt=Object.getOwnPropertyDescriptor;var re=Object.assign,at=r=>_e(r,"__esModule",{value:!0});var it=(r,i)=>()=>(i||(i={exports:{}},r(i.exports,i)),i.exports);var ot=(r,i,v)=>{if(i&&typeof i=="object"||typeof i=="function")for(let s of nt(i))!tt.call(r,s)&&s!=="default"&&_e(r,s,{get:()=>i[s],enumerable:!(v=rt(i,s))||v.enumerable});return r},st=r=>ot(at(_e(r!=null?Ze(et(r)):{},"default",r&&r.__esModule&&"default"in r?{get:()=>r.default,enumerable:!0}:{value:r,enumerable:!0})),r);var we=(r,i,v)=>new Promise((s,T)=>{var b=M=>{try{C(v.next(M))}catch(K){T(K)}},A=M=>{try{C(v.throw(M))}catch(K){T(K)}},C=M=>M.done?s(M.value):Promise.resolve(M.value).then(b,A);C((v=v.apply(r,i)).next())});var Ue=it((Fe,Se)=>{(function(r){"use strict";var i=r.setTimeout,v=r.clearTimeout,s=r.XMLHttpRequest,T=r.XDomainRequest,b=r.ActiveXObject,A=r.EventSource,C=r.document,M=r.Promise,K=r.fetch,fe=r.Response,L=r.TextDecoder,R=r.TextEncoder,G=r.AbortController;if(typeof window!="undefined"&&typeof C!="undefined"&&!("readyState"in C)&&C.body==null&&(C.readyState="loading",window.addEventListener("load",function(e){C.readyState="complete"},!1)),s==null&&b!=null&&(s=function(){return new b("Microsoft.XMLHTTP")}),Object.create==null&&(Object.create=function(e){function n(){}return n.prototype=e,new n}),Date.now||(Date.now=function(){return new Date().getTime()}),G==null){var I=K;K=function(e,n){var a=n.signal;return I(e,{headers:n.headers,credentials:n.credentials,cache:n.cache}).then(function(t){var c=t.body.getReader();return a._reader=c,a._aborted&&a._reader.cancel(),{status:t.status,statusText:t.statusText,headers:t.headers,body:{getReader:function(){return c}}}})},G=function(){this.signal={_reader:null,_aborted:!1},this.abort=function(){this.signal._reader!=null&&this.signal._reader.cancel(),this.signal._aborted=!0}}}function pe(){this.bitsNeeded=0,this.codePoint=0}pe.prototype.decode=function(e){function n(h,g,u){if(u===1)return h>=128>>g&&h<<g<=2047;if(u===2)return h>=2048>>g&&h<<g<=55295||h>=57344>>g&&h<<g<=65535;if(u===3)return h>=65536>>g&&h<<g<=1114111;throw new Error}function a(h,g){if(h===6*1)return g>>6>15?3:g>31?2:1;if(h===6*2)return g>15?3:2;if(h===6*3)return 3;throw new Error}for(var t=65533,c="",o=this.bitsNeeded,l=this.codePoint,y=0;y<e.length;y+=1){var p=e[y];o!==0&&(p<128||p>191||!n(l<<6|p&63,o-6,a(o,l)))&&(o=0,l=t,c+=String.fromCharCode(l)),o===0?(p>=0&&p<=127?(o=0,l=p):p>=192&&p<=223?(o=6*1,l=p&31):p>=224&&p<=239?(o=6*2,l=p&15):p>=240&&p<=247?(o=6*3,l=p&7):(o=0,l=t),o!==0&&!n(l,o,a(o,l))&&(o=0,l=t)):(o-=6,l=l<<6|p&63),o===0&&(l<=65535?c+=String.fromCharCode(l):(c+=String.fromCharCode(55296+(l-65535-1>>10)),c+=String.fromCharCode(56320+(l-65535-1&1023))))}return this.bitsNeeded=o,this.codePoint=l,c};var Re=function(){try{return new L().decode(new R().encode("test"),{stream:!0})==="test"}catch(e){console.debug("TextDecoder does not support streaming option. Using polyfill instead: "+e)}return!1};(L==null||R==null||!Re())&&(L=pe);var D=function(){};function k(e){this.withCredentials=!1,this.readyState=0,this.status=0,this.statusText="",this.responseText="",this.onprogress=D,this.onload=D,this.onerror=D,this.onreadystatechange=D,this._contentType="",this._xhr=e,this._sendTimeout=0,this._abort=D}k.prototype.open=function(e,n){this._abort(!0);var a=this,t=this._xhr,c=1,o=0;this._abort=function(u){a._sendTimeout!==0&&(v(a._sendTimeout),a._sendTimeout=0),(c===1||c===2||c===3)&&(c=4,t.onload=D,t.onerror=D,t.onabort=D,t.onprogress=D,t.onreadystatechange=D,t.abort(),o!==0&&(v(o),o=0),u||(a.readyState=4,a.onabort(null),a.onreadystatechange())),c=0};var l=function(){if(c===1){var u=0,E="",W=void 0;if("contentType"in t)u=200,E="OK",W=t.contentType;else try{u=t.status,E=t.statusText,W=t.getResponseHeader("Content-Type")}catch(le){u=0,E="",W=void 0}u!==0&&(c=2,a.readyState=2,a.status=u,a.statusText=E,a._contentType=W,a.onreadystatechange())}},y=function(){if(l(),c===2||c===3){c=3;var u="";try{u=t.responseText}catch(E){}a.readyState=3,a.responseText=u,a.onprogress()}},p=function(u,E){if((E==null||E.preventDefault==null)&&(E={preventDefault:D}),y(),c===1||c===2||c===3){if(c=4,o!==0&&(v(o),o=0),a.readyState=4,u==="load")a.onload(E);else if(u==="error")a.onerror(E);else if(u==="abort")a.onabort(E);else throw new TypeError;a.onreadystatechange()}},h=function(u){t!=null&&(t.readyState===4?(!("onload"in t)||!("onerror"in t)||!("onabort"in t))&&p(t.responseText===""?"error":"load",u):t.readyState===3?"onprogress"in t||y():t.readyState===2&&l())},g=function(){o=i(function(){g()},500),t.readyState===3&&y()};"onload"in t&&(t.onload=function(u){p("load",u)}),"onerror"in t&&(t.onerror=function(u){p("error",u)}),"onabort"in t&&(t.onabort=function(u){p("abort",u)}),"onprogress"in t&&(t.onprogress=y),"onreadystatechange"in t&&(t.onreadystatechange=function(u){h(u)}),("contentType"in t||!("ontimeout"in s.prototype))&&(n+=(n.indexOf("?")===-1?"?":"&")+"padding=true"),t.open(e,n,!0),"readyState"in t&&(o=i(function(){g()},0))},k.prototype.abort=function(){this._abort(!1)},k.prototype.getResponseHeader=function(e){return this._contentType},k.prototype.setRequestHeader=function(e,n){var a=this._xhr;"setRequestHeader"in a&&a.setRequestHeader(e,n)},k.prototype.getAllResponseHeaders=function(){return this._xhr.getAllResponseHeaders!=null&&this._xhr.getAllResponseHeaders()||""},k.prototype.send=function(){if((!("ontimeout"in s.prototype)||!("sendAsBinary"in s.prototype)&&!("mozAnon"in s.prototype))&&C!=null&&C.readyState!=null&&C.readyState!=="complete"){var e=this;e._sendTimeout=i(function(){e._sendTimeout=0,e.send()},4);return}var n=this._xhr;"withCredentials"in n&&(n.withCredentials=this.withCredentials);try{n.send(void 0)}catch(a){throw a}};function j(e){return e.replace(/[A-Z]/g,function(n){return String.fromCharCode(n.charCodeAt(0)+32)})}function ce(e){for(var n=Object.create(null),a=e.split(`\r
`),t=0;t<a.length;t+=1){var c=a[t],o=c.split(": "),l=o.shift(),y=o.join(": ");n[j(l)]=y}this._map=n}ce.prototype.get=function(e){return this._map[j(e)]},s!=null&&s.HEADERS_RECEIVED==null&&(s.HEADERS_RECEIVED=2);function ue(){}ue.prototype.open=function(e,n,a,t,c,o,l){e.open("GET",c);var y=0;e.onprogress=function(){var h=e.responseText,g=h.slice(y);y+=g.length,a(g)},e.onerror=function(h){h.preventDefault(),t(new Error("NetworkError"))},e.onload=function(){t(null)},e.onabort=function(){t(null)},e.onreadystatechange=function(){if(e.readyState===s.HEADERS_RECEIVED){var h=e.status,g=e.statusText,u=e.getResponseHeader("Content-Type"),E=e.getAllResponseHeaders();n(h,g,u,new ce(E))}},e.withCredentials=o;for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&e.setRequestHeader(p,l[p]);return e.send(),e};function he(e){this._headers=e}he.prototype.get=function(e){return this._headers.get(e)};function ge(){}ge.prototype.open=function(e,n,a,t,c,o,l){var y=null,p=new G,h=p.signal,g=new L;return K(c,{headers:l,credentials:o?"include":"same-origin",signal:h,cache:"no-store"}).then(function(u){return y=u.body.getReader(),n(u.status,u.statusText,u.headers.get("Content-Type"),new he(u.headers)),new M(function(E,W){var le=function(){y.read().then(function(U){if(U.done)E(void 0);else{var N=g.decode(U.value,{stream:!0});a(N),le()}}).catch(function(U){W(U)})};le()})}).catch(function(u){if(u.name!=="AbortError")return u}).then(function(u){t(u)}),{abort:function(){y!=null&&y.cancel(),p.abort()}}};function te(){this._listeners=Object.create(null)}function ye(e){i(function(){throw e},0)}te.prototype.dispatchEvent=function(e){e.target=this;var n=this._listeners[e.type];if(n!=null)for(var a=n.length,t=0;t<a;t+=1){var c=n[t];try{typeof c.handleEvent=="function"?c.handleEvent(e):c.call(this,e)}catch(o){ye(o)}}},te.prototype.addEventListener=function(e,n){e=String(e);var a=this._listeners,t=a[e];t==null&&(t=[],a[e]=t);for(var c=!1,o=0;o<t.length;o+=1)t[o]===n&&(c=!0);c||t.push(n)},te.prototype.removeEventListener=function(e,n){e=String(e);var a=this._listeners,t=a[e];if(t!=null){for(var c=[],o=0;o<t.length;o+=1)t[o]!==n&&c.push(t[o]);c.length===0?delete a[e]:a[e]=c}};function z(e){this.type=e,this.target=void 0}function d(e,n){z.call(this,e),this.data=n.data,this.lastEventId=n.lastEventId}d.prototype=Object.create(z.prototype);function f(e,n){z.call(this,e),this.status=n.status,this.statusText=n.statusText,this.headers=n.headers}f.prototype=Object.create(z.prototype);function m(e,n){z.call(this,e),this.error=n.error}m.prototype=Object.create(z.prototype);var H=-1,V=0,X=1,J=2,ae=-1,ee=0,Oe=1,Me=2,Ke=3,Ge=/^text\/event\-stream(;.*)?$/i,Xe=1e3,qe=18e6,Ae=function(e,n){var a=e==null?n:parseInt(e,10);return a!==a&&(a=n),Ie(a)},Ie=function(e){return Math.min(Math.max(e,Xe),qe)},ie=function(e,n,a){try{typeof n=="function"&&n.call(e,a)}catch(t){ye(t)}};function q(e,n){te.call(this),n=n||{},this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,this.url=void 0,this.readyState=void 0,this.withCredentials=void 0,this.headers=void 0,this._close=void 0,We(this,e,n)}function Je(){return s!=null&&"withCredentials"in s.prototype||T==null?new s:new T}var ze=K!=null&&fe!=null&&"body"in fe.prototype;function We(e,n,a){n=String(n);var t=Boolean(a.withCredentials),c=a.lastEventIdQueryParameterName||"lastEventId",o=Ie(1e3),l=Ae(a.heartbeatTimeout,45e3),y="",p=o,h=!1,g=0,u=a.headers||{},E=a.Transport,W=ze&&E==null?void 0:new k(E!=null?new E:Je()),le=E!=null&&typeof E!="string"?new E:W==null?new ge:new ue,U=void 0,N=0,$=H,oe="",Ee="",Y="",me="",_=ee,De=0,ne=0,Ye=function(S,w,B,P){if($===V)if(S===200&&B!=null&&Ge.test(B)){$=X,h=Date.now(),p=o,e.readyState=X;var x=new f("open",{status:S,statusText:w,headers:P});e.dispatchEvent(x),ie(e,e.onopen,x)}else{var O="";S!==200?(w&&(w=w.replace(/\s+/g," ")),O="EventSource's response has a status "+S+" "+w+" that is not 200. Aborting the connection."):O="EventSource's response has a Content-Type specifying an unsupported type: "+(B==null?"-":B.replace(/\s+/g," "))+". Aborting the connection.",Ne();var x=new f("error",{status:S,statusText:w,headers:P});e.dispatchEvent(x),ie(e,e.onerror,x),console.error(O)}},Qe=function(S){if($===X){for(var w=-1,B=0;B<S.length;B+=1){var P=S.charCodeAt(B);(P===`
`.charCodeAt(0)||P==="\r".charCodeAt(0))&&(w=B)}var x=(w!==-1?me:"")+S.slice(0,w+1);me=(w===-1?me:"")+S.slice(w+1),S!==""&&(h=Date.now(),g+=S.length);for(var O=0;O<x.length;O+=1){var P=x.charCodeAt(O);if(_===ae&&P===`
`.charCodeAt(0))_=ee;else if(_===ae&&(_=ee),P==="\r".charCodeAt(0)||P===`
`.charCodeAt(0)){if(_!==ee){_===Oe&&(ne=O+1);var Q=x.slice(De,ne-1),Z=x.slice(ne+(ne<O&&x.charCodeAt(ne)===" ".charCodeAt(0)?1:0),O);Q==="data"?(oe+=`
`,oe+=Z):Q==="id"?Ee=Z:Q==="event"?Y=Z:Q==="retry"?(o=Ae(Z,o),p=o):Q==="heartbeatTimeout"&&(l=Ae(Z,l),N!==0&&(v(N),N=i(function(){ve()},l)))}if(_===ee){if(oe!==""){y=Ee,Y===""&&(Y="message");var se=new d(Y,{data:oe.slice(1),lastEventId:Ee});if(e.dispatchEvent(se),Y==="open"?ie(e,e.onopen,se):Y==="message"?ie(e,e.onmessage,se):Y==="error"&&ie(e,e.onerror,se),$===J)return}oe="",Y=""}_=P==="\r".charCodeAt(0)?ae:ee}else _===ee&&(De=O,_=Oe),_===Oe?P===":".charCodeAt(0)&&(ne=O+1,_=Me):_===Me&&(_=Ke)}}},He=function(S){if($===X||$===V)$=H,N!==0&&(v(N),N=0),N=i(function(){ve()},p),p=Ie(Math.min(o*16,p*2)),e.readyState=V;else if($===J&&S!=null){console.error(S);var w=new m("error",{error:S});e.dispatchEvent(w),ie(e,e.onerror,w)}},Ne=function(){$=J,U!=null&&(U.abort(),U=void 0),N!==0&&(v(N),N=0),e.readyState=J},ve=function(){if(N=0,$!==H){if(!h&&U!=null)He(new Error("No activity within "+l+" milliseconds. "+($===V?"No response received.":g+" chars received.")+" Reconnecting.")),U!=null&&(U.abort(),U=void 0);else{var S=Math.max((h||Date.now())+l-Date.now(),1);h=!1,N=i(function(){ve()},S)}return}h=!1,g=0,N=i(function(){ve()},l),$=V,oe="",Y="",Ee=y,me="",De=0,ne=0,_=ee;var w=n;if(n.slice(0,5)!=="data:"&&n.slice(0,5)!=="blob:"&&y!==""){var B=n.indexOf("?");w=B===-1?n:n.slice(0,B+1)+n.slice(B+1).replace(/(?:^|&)([^=&]*)(?:=[^&]*)?/g,function(Z,se){return se===c?"":Z}),w+=(n.indexOf("?")===-1?"?":"&")+c+"="+encodeURIComponent(y)}var P=e.withCredentials,x={};x.Accept="text/event-stream";var O=e.headers;if(O!=null)for(var Q in O)Object.prototype.hasOwnProperty.call(O,Q)&&(x[Q]=O[Q]);try{U=le.open(W,Ye,Qe,He,w,P,x)}catch(Z){throw Ne(),Z}};e.url=n,e.readyState=V,e.withCredentials=t,e.headers=u,e._close=Ne,ve()}q.prototype=Object.create(te.prototype),q.prototype.CONNECTING=V,q.prototype.OPEN=X,q.prototype.CLOSED=J,q.prototype.close=function(){this._close()},q.CONNECTING=V,q.OPEN=X,q.CLOSED=J,q.prototype.withCredentials=void 0;var ke=A;s!=null&&(A==null||!("withCredentials"in A.prototype))&&(ke=q),function(e){if(typeof Se=="object"&&typeof Se.exports=="object"){var n=e(Fe);n!==void 0&&(Se.exports=n)}else typeof define=="function"&&define.amd?define(["exports"],e):e(r)}(function(e){e.EventSourcePolyfill=q,e.NativeEventSource=A,e.EventSource=ke})})(typeof globalThis=="undefined"?typeof window!="undefined"?window:typeof self!="undefined"?self:Fe:globalThis)});function xe(r){this.message=r}xe.prototype=new Error,xe.prototype.name="InvalidCharacterError";var Le=typeof window!="undefined"&&window.atob&&window.atob.bind(window)||function(r){var i=String(r).replace(/=+$/,"");if(i.length%4==1)throw new xe("'atob' failed: The string to be decoded is not correctly encoded.");for(var v,s,T=0,b=0,A="";s=i.charAt(b++);~s&&(v=T%4?64*v+s:s,T++%4)?A+=String.fromCharCode(255&v>>(-2*T&6)):0)s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(s);return A};function dt(r){var i=r.replace(/-/g,"+").replace(/_/g,"/");switch(i.length%4){case 0:break;case 2:i+="==";break;case 3:i+="=";break;default:throw"Illegal base64url string!"}try{return function(v){return decodeURIComponent(Le(v).replace(/(.)/g,function(s,T){var b=T.charCodeAt(0).toString(16).toUpperCase();return b.length<2&&(b="0"+b),"%"+b}))}(i)}catch(v){return Le(i)}}function be(r){this.message=r}function ft(r,i){if(typeof r!="string")throw new be("Invalid token specified");var v=(i=i||{}).header===!0?0:1;try{return JSON.parse(dt(r.split(".")[v]))}catch(s){throw new be("Invalid token specified: "+s.message)}}be.prototype=new Error,be.prototype.name="InvalidTokenError";var je=ft;function Ve(r){return{all:r=r||new Map,on:function(i,v){var s=r.get(i);s&&s.push(v)||r.set(i,[v])},off:function(i,v){var s=r.get(i);s&&s.splice(s.indexOf(v)>>>0,1)},emit:function(i,v){(r.get(i)||[]).slice().map(function(s){s(v)}),(r.get("*")||[]).slice().map(function(s){s(i,v)})}}}var Pe=st(Ue());var F;(function(r){r.READY="ready",r.CONNECTED="connected",r.DISCONNECTED="disconnected",r.CHANGED="changed",r.ERROR="error"})(F||(F={}));var Be={debug:!1,baseUrl:"https://config.ff.harness.io/api/1.0",eventUrl:"https://events.ff.harness.io/api/1.0",streamEnabled:!0,allAttributesPrivate:!1,privateAttributeNames:[]},de=(r,...i)=>console.error(`[FF-SDK] ${r}`,...i),Te=30*1e3;var ct="1.5.0",ut=500,Ce=globalThis.fetch,lt=Pe.EventSourcePolyfill,$e=r=>{let{value:i}=r;try{switch(r.kind.toLowerCase()){case"int":case"number":i=Number(i);break;case"boolean":i=i.toString().toLowerCase()==="true";break;case"json":i=JSON.parse(i);break}}catch(v){de(v)}return i},vt=(r,i,v)=>{let s,T,b,A,C,M=!0,K=()=>{M=!1},fe=()=>{M=!0},L=[],R=Ve(),G=re(re({},Be),v),I=(d,...f)=>{G.debug&&console.debug(`[FF-SDK] ${d}`,...f)},pe=d=>{if(M){let f=Date.now();f-d.lastAccessed>ut&&(d.count++,d.lastAccessed=f)}};globalThis.onbeforeunload=()=>{L.length&&globalThis.localStorage&&(K(),globalThis.localStorage.HARNESS_FF_METRICS=JSON.stringify(L),fe())};let Re=(d,f)=>we(void 0,null,function*(){return(yield(yield Ce(`${f.baseUrl}/client/auth`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apiKey:d,target:i})})).json()).authToken}),D=()=>{if(L.length){I("Sending metrics...",{metrics:L,evaluations:k});let d={metricsData:L.map(f=>({timestamp:Date.now(),count:f.count,metricsType:"FFMETRICS",attributes:[{key:"featureIdentifier",value:f.featureIdentifier},{key:"featureName",value:f.featureIdentifier},{key:"variationIdentifier",value:f.variationIdentifier},{key:"target",value:i.identifier},{key:"SDK_NAME",value:"JavaScript"},{key:"SDK_LANGUAGE",value:"JavaScript"},{key:"SDK_TYPE",value:"client"},{key:"SDK_VERSION",value:ct}]}))};Ce(`${G.eventUrl}/metrics/${s}?cluster=${T}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${A}`},body:JSON.stringify(d)}).then(()=>{L=[]}).catch(f=>{I(f)}).finally(()=>{C=window.setTimeout(D,Te)})}else C=window.setTimeout(D,Te)},k={},j={};Re(r,G).then(d=>{A=d;let f=je(d);if(I("Authenticated",f),globalThis.localStorage&&globalThis.localStorage.HARNESS_FF_METRICS)try{delete globalThis.localStorage.HARNESS_FF_METRICS,I("Picking up metrics from previous session")}catch(m){}C=window.setTimeout(D,Te),s=f.environment,T=f.clusterIdentifier,ce().then(()=>{I("Fetch all flags ok",j)}).then(()=>{he()}).then(()=>{I("Event stream ready",{storage:j}),R.emit(F.READY,Object.keys(j))}).catch(m=>{R.emit(F.ERROR,m)})}).catch(d=>{de("Authentication error: ",d),R.emit(F.ERROR,d)});let ce=()=>we(void 0,null,function*(){try{(yield(yield Ce(`${G.baseUrl}/client/env/${s}/target/${i.identifier}/evaluations?cluster=${T}`,{headers:{Authorization:`Bearer ${A}`}})).json()).forEach(m=>{let H=$e(m),V=j[m.flag];H!==V&&(I("Flag variation has changed for ",m.identifier),j[m.flag]=H,k[m.flag]=re(re({},m),{value:H}))})}catch(d){return de("Features fetch operation error: ",d),R.emit(F.ERROR,d),d}}),ue=d=>we(void 0,null,function*(){try{let f=yield Ce(`${G.baseUrl}/client/env/${s}/target/${i.identifier}/evaluations/${d}?cluster=${T}`,{headers:{Authorization:`Bearer ${A}`}});if(f.ok){let m=yield f.json(),H=$e(m);K(),j[d]=H,k[d]=re(re({},m),{value:H}),fe(),R.emit(F.CHANGED,d)}else R.emit(F.ERROR,f)}catch(f){de("Feature fetch operation error: ",f),R.emit(F.ERROR,f)}}),he=()=>{if(!G.streamEnabled){I("Stream is disabled by configuration. Note: Polling is not yet supported");return}b=new lt(`${G.baseUrl}/stream?cluster=${T}`,{headers:{Authorization:`Bearer ${A}`,"API-Key":r}}),b.onopen=d=>{I("Stream connected",d),R.emit(F.CONNECTED)},b.onclose=d=>{I("Stream disconnected"),R.emit(F.DISCONNECTED)},b.onerror=d=>{de("Stream has issue",d),R.emit(F.ERROR,d)},b.addEventListener("*",d=>{let f=JSON.parse(d.data);switch(I("Received event from stream: ",f),f.event){case"create":setTimeout(()=>ue(f.identifier),1e3);break;case"patch":f.domain==="target-segment"?ce():ue(f.identifier);break;case"delete":delete j[f.identifier],R.emit(F.CHANGED,{flag:f.identifier,value:void 0,deleted:!0}),I("Evaluation deleted",{message:f,storage:j});break}})},ge=(d,f)=>R.on(d,f),te=(d,f)=>{d?R.off(d,f):z()},ye=(d,f)=>{var H;let m=j[d];if(m!==void 0){let V=m,X=d,J=L.find(ae=>ae.featureIdentifier===X&&ae.featureValue===V);J?(pe(J),J.variationIdentifier=((H=k[X])==null?void 0:H.identifier)||""):L.push({featureIdentifier:X,featureValue:V,count:M?1:0,variationIdentifier:k[X].identifier||"",lastAccessed:Date.now()})}return m!==void 0?m:f},z=()=>{I("Closing event stream"),j={},k={},clearTimeout(C),R.all.clear(),b.close()};return{on:ge,off:te,variation:ye,close:z}};export{F as Event,vt as initialize};
/** @license
 * eventsource.js
 * Available under MIT License (MIT)
 * https://github.com/Yaffle/EventSource/
 */
//# sourceMappingURL=sdk.client.js.map
